<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Bóveda de Aprendizaje</title>
  <style>
    body{font-family:Arial,Helvetica,sans-serif;margin:0;padding:0;background:#f7f9ff;color:#222;}
    header{background:#fff;border-bottom:1px solid #ddd;padding:10px 20px;display:flex;align-items:center;justify-content:space-between;}
    h1{font-size:20px;color:#2A317F;margin:0;}
    .tabs{display:flex;gap:10px;margin:20px;}
    .tab{padding:8px 16px;border:1px solid #ddd;border-radius:20px;cursor:pointer;background:#fff;color:#555;}
    .tab.active{background:#0062FE;color:#fff;border-color:#0062FE;}
    .hide{display:none}
    .wrap{max-width:1000px;margin:20px auto;padding:0 20px;}
    .card{background:#fff;border:1px solid #ddd;border-radius:12px;padding:16px;margin-bottom:16px;}
    input,button{padding:8px 12px;border-radius:6px;border:1px solid #ccc;font-size:14px;}
    button{cursor:pointer;}
    .btn-primary{background:#0062FE;color:#fff;border:none;}
    .btn-primary:hover{background:#0054D3;}
    table{width:100%;border-collapse:collapse;font-size:14px;}
    th,td{border-bottom:1px solid #eee;padding:8px;text-align:left;}
    th{color:#555;}
  </style>
</head>
<body>
  <header>
    <h1>Bóveda de Aprendizaje</h1>
    <div id="userInfo"></div>
  </header>

  <main class="wrap">
    <!-- LOGIN -->
    <section id="view-login">
      <div class="card">
        <h2>Iniciar sesión</h2>
        <p>Accede con tu correo y contraseña.</p>
        <input type="email" id="loginEmail" placeholder="Correo"><br><br>
        <input type="password" id="loginPass" placeholder="Contraseña"><br><br>
        <button class="btn-primary" onclick="doLogin()">Entrar</button>
      </div>
    </section>

    <!-- TABS -->
    <div id="navTabs" class="tabs hide">
      <button class="tab active" onclick="switchTab('user')">Usuario</button>
      <button class="tab" id="tab-admin" onclick="switchTab('admin')">Administrador</button>
    </div>

    <!-- USUARIO -->
    <section id="view-user" class="hide">
      <div class="card">
        <h2>Repositorio de videos</h2>
        <p>En este espacio encontrarás un repositorio de videos que debemos ver con atención.</p>
        <ul id="userVideos"></ul>
      </div>
    </section>

    <!-- ADMIN -->
    <section id="view-admin" class="hide">
      <div class="card">
        <h2>Panel del Administrador</h2>
        <form onsubmit="addVideo();return false;">
          <input type="text" id="videoTitle" placeholder="Título" required>
          <input type="url" id="videoUrl" placeholder="URL del video" required>
          <button class="btn-primary" type="submit">Agregar</button>
        </form>
      </div>
      <div class="card">
        <h3>Listado de videos</h3>
        <table>
          <thead><tr><th>Título</th><th>URL</th></tr></thead>
          <tbody id="adminVideos"></tbody>
        </table>
      </div>
    </section>
  </main>

<script>
  const ADMIN_EMAIL = "eric.barrera@edyen.com";
  const ADMIN_PASS  = "1414";

  function doLogin(){
    const email = document.getElementById("loginEmail").value.trim();
    const pass  = document.getElementById("loginPass").value.trim();

    if(email === ADMIN_EMAIL && pass === ADMIN_PASS){
      localStorage.setItem("role","admin");
      localStorage.setItem("user",email);
      alert("Bienvenido administrador");
    } else {
      localStorage.setItem("role","user");
      localStorage.setItem("user",email||"Invitado");
      alert("Bienvenido usuario");
    }
    showApp();
  }

  function showApp(){
    const role = localStorage.getItem("role");
    const user = localStorage.getItem("user");
    document.getElementById("view-login").classList.add("hide");
    document.getElementById("navTabs").classList.remove("hide");
    document.getElementById("view-user").classList.remove("hide");
    document.getElementById("userInfo").textContent = user+" ("+role+")";

    if(role==="admin"){
      document.getElementById("tab-admin").style.display="inline-block";
    }else{
      document.getElementById("tab-admin").style.display="none";
    }
    renderVideos();
  }

  function switchTab(tab){
    document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
    if(tab==="user"){
      document.getElementById("view-user").classList.remove("hide");
      document.getElementById("view-admin").classList.add("hide");
      document.querySelectorAll(".tab")[0].classList.add("active");
    } else {
      document.getElementById("view-admin").classList.remove("hide");
      document.getElementById("view-user").classList.add("hide");
      document.querySelectorAll(".tab")[1].classList.add("active");
    }
  }

  // manejo de videos (localStorage)
  function addVideo(){
    const title=document.getElementById("videoTitle").value;
    const url=document.getElementById("videoUrl").value;
    const videos=JSON.parse(localStorage.getItem("videos")||"[]");
    videos.push({title,url});
    localStorage.setItem("videos",JSON.stringify(videos));
    document.getElementById("videoTitle").value="";
    document.getElementById("videoUrl").value="";
    renderVideos();
  }

  function renderVideos(){
    const videos=JSON.parse(localStorage.getItem("videos")||"[]");
    const userList=document.getElementById("userVideos");
    const adminList=document.getElementById("adminVideos");
    userList.innerHTML=""; adminList.innerHTML="";
    videos.forEach(v=>{
      const li=document.createElement("li");
      li.innerHTML=`<a href="${v.url}" target="_blank">${v.title}</a>`;
      userList.appendChild(li);

      const tr=document.createElement("tr");
      tr.innerHTML=`<td>${v.title}</td><td><a href="${v.url}" target="_blank">Ver</a></td>`;
      adminList.appendChild(tr);
    });
  }

  // auto-login si ya existe en localStorage
  if(localStorage.getItem("role")) showApp();
</script>
</body>
</html>
